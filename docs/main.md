# Документация Telegram бота для навигации

## Описание
Бот предназначен для создания и управления навигационной системой с узлами (точками) и связями между ними. Каждый узел содержит изображение ориентира и может иметь панорамное изображение. Бот позволяет строить маршруты между точками.

## Команды

### Основные команды
- `/start` - Начало работы с ботом
- `/id_table` - Показать таблицу соответствия названий точек и их ID
- `/new_node` - Создать новую точку
- `/new_edge` - Создать связь между точками
- `/path` - Найти путь между двумя точками
- `/nodes_list` - Показать список всех точек
- `/add_panorama` - Добавить панорамное изображение к существующей точке
- `/get_id` - Получить ID пользователя

### Подробное описание команд

#### `/new_node`
Создание новой точки:
1. Отправьте фотографию ориентира
2. В подписи к фото укажите название точки
3. Бот вернет ID созданной точки

#### `/new_edge`
Создание связи между точками:
1. Введите два ID точек через пробел
2. Бот создаст однонаправленную связь между указанными точками

#### `/path`
Поиск маршрута:
1. Введите ID начальной и конечной точки через пробел
2. Бот покажет последовательность точек с их изображениями и панорамами

#### `/add_panorama`
Добавление панорамы:
1. Отправьте панорамное изображение
2. В подписи укажите ID точки
3. Панорама будет привязана к указанной точке

## Безопасность
- Доступ к боту ограничен списком разрешенных пользователей (`ALLOWED_USERS`)
- Все команды проверяют права доступа пользователя

## Технические детали
- Узлы хранятся в графовой базе данных Neo4j
- Изображения сохраняются в MinIO
- Для просмотра панорам используется Pannellum viewer
- Используется Redis для хранения таблицы соответствия ID

## Обработка ошибок
Бот включает обработку различных ошибок с кодами:
- Code 1: Ошибка получения списка узлов
- Code 2-5: Ошибки при создании новой точки
- Code 22-25: Ошибки при добавлении панорамы
- Code 562: Ошибка поиска пути
- Code 1562: Ошибка получения списка точек